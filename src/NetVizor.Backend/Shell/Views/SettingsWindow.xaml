<Window
    x:Class="Shell.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d"
    Title="NetVizor - è®¾ç½®"
    Height="720"
    Width="560"
    MinHeight="720"
    MinWidth="560"
    WindowStartupLocation="CenterScreen"
    ResizeMode="NoResize"
    Background="#F8F9FA">

    <!-- çª—å£èµ„æº -->
    <Window.Resources>
        <!-- å¡ç‰‡æ ·å¼ -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E5E7EB" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="16" />
            <Setter Property="Margin" Value="0,0,0,12" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" BlurRadius="4" ShadowDepth="1" Opacity="0.1" />
                </Setter.Value>
            </Setter>
        </Style>

        <!-- åˆ†ç»„æ ‡é¢˜æ ·å¼ -->
        <Style x:Key="GroupTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="#1F2937" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>

        <!-- æ ‡ç­¾æ ·å¼ -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="#4B5563" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,0,8,0" />
        </Style>

        <!-- é¢œè‰²æŒ‰é’®æ ·å¼ -->
        <Style x:Key="ColorButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="32" />
            <Setter Property="Height" Value="32" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="#D1D5DB" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- è¾“å…¥æ¡†æ ·å¼ -->
        <Style x:Key="InputStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="BorderBrush" Value="#D1D5DB" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Background" Value="White" />
            <Setter Property="FontSize" Value="13" />
        </Style>

        <!-- æŒ‰é’®æ ·å¼ -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3B82F6" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="16,8" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2563EB" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="#6B7280" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="#D1D5DB" />
            <Setter Property="Padding" Value="16,8" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F9FAFB" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- ä¸»å®¹å™¨ -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- å†…å®¹æ»šåŠ¨åŒºåŸŸ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="20">
            <StackPanel>

                <!-- å¤–è§‚è®¾ç½® -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸŽ¨ å¤–è§‚è®¾ç½®" Style="{StaticResource GroupTitleStyle}" />

                        <!-- é¢œè‰²è®¾ç½® -->
                        <Grid Margin="0,0,0,16">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="12" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="12" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- æ–‡å­—é¢œè‰² -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal">
                                <TextBlock Text="æ–‡å­—é¢œè‰²" Style="{StaticResource LabelStyle}" Width="80" />
                                <TextBox x:Name="TextColorBox" Text="#333333" Style="{StaticResource InputStyle}"
                                         Width="120" Margin="0,0,8,0" />
                                <Button x:Name="TextColorButton" Background="#333333"
                                        Style="{StaticResource ColorButtonStyle}" Click="SelectTextColor_Click" />
                            </StackPanel>

                            <!-- èƒŒæ™¯é¢œè‰² -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal">
                                <TextBlock Text="èƒŒæ™¯é¢œè‰²" Style="{StaticResource LabelStyle}" Width="80" />
                                <TextBox x:Name="BackgroundColorBox" Text="#F0FFFFFF"
                                         Style="{StaticResource InputStyle}" Width="120" Margin="0,0,8,0" />
                                <Button x:Name="BackgroundColorButton" Background="#F0FFFFFF"
                                        Style="{StaticResource ColorButtonStyle}" Click="SelectBackgroundColor_Click" />
                            </StackPanel>

                            <!-- é€æ˜Žåº¦ -->
                            <StackPanel Grid.Row="4" Orientation="Horizontal">
                                <TextBlock Text="é€æ˜Žåº¦" Style="{StaticResource LabelStyle}" Width="80" />
                                <Slider x:Name="OpacitySlider" Minimum="10" Maximum="100" Value="94"
                                        TickFrequency="10" IsSnapToTickEnabled="True"
                                        ValueChanged="OpacitySlider_ValueChanged"
                                        Width="120" Margin="0,0,8,0" VerticalAlignment="Center" />
                                <TextBlock x:Name="OpacityText" Text="94%" TextAlignment="Center"
                                           VerticalAlignment="Center"
                                           Width="40" FontWeight="SemiBold" Foreground="#3B82F6" />
                            </StackPanel>
                        </Grid>

                        <!-- é¢„è§ˆåŒºåŸŸ -->
                        <StackPanel>
                            <TextBlock Text="é¢„è§ˆæ•ˆæžœ" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                            <Border x:Name="PreviewBorder" Background="LightGray" BorderBrush="#D1D5DB"
                                    BorderThickness="1"
                                    CornerRadius="6" Padding="16,12" HorizontalAlignment="Center">
                                <StackPanel x:Name="PreviewPanel" Orientation="Horizontal">
                                    <Grid Width="80">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="â†‘" Foreground="Red" FontSize="12"
                                                   FontWeight="Bold"
                                                   VerticalAlignment="Center" Margin="0,0,6,0" />
                                        <TextBlock Grid.Column="1" x:Name="PreviewUploadText" Text="1.25 MB/s"
                                                   FontSize="12"
                                                   FontWeight="Bold" VerticalAlignment="Center" />
                                    </Grid>
                                    <Grid Width="80" Margin="0,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="â†“" Foreground="Green" FontSize="12"
                                                   FontWeight="Bold"
                                                   VerticalAlignment="Center" Margin="0,0,2,0" />
                                        <TextBlock Grid.Column="1" x:Name="PreviewDownloadText" Text="15.67 MB/s"
                                                   FontSize="12"
                                                   FontWeight="Bold" VerticalAlignment="Center" />
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- æ˜¾ç¤ºè®¾ç½® -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸ“Š æ˜¾ç¤ºè®¾ç½®" Style="{StaticResource GroupTitleStyle}" />

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="16" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="16" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- é€Ÿåº¦å•ä½ -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal">
                                <TextBlock Text="é€Ÿåº¦å•ä½" Style="{StaticResource LabelStyle}" Width="80" />
                                <ComboBox x:Name="SpeedUnitComboBox" Width="150"
                                          SelectionChanged="SpeedUnitComboBox_SelectionChanged">
                                    <ComboBoxItem Content="è‡ªåŠ¨é€‰æ‹©" Tag="Auto" IsSelected="True" />
                                    <ComboBoxItem Content="B/s" Tag="Bytes" />
                                    <ComboBoxItem Content="KB/s" Tag="KB" />
                                    <ComboBoxItem Content="MB/s" Tag="MB" />
                                </ComboBox>
                            </StackPanel>

                            <!-- å¸ƒå±€æ–¹å‘ -->
                            <StackPanel Grid.Row="2">
                                <TextBlock Text="å¸ƒå±€æ–¹å‘" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton x:Name="VerticalLayoutRadio" Content="çºµå‘" IsChecked="True"
                                                 Margin="0,0,20,0"
                                                 Checked="LayoutDirection_Changed" FontSize="13" />
                                    <RadioButton x:Name="HorizontalLayoutRadio" Content="æ¨ªå‘"
                                                 Checked="LayoutDirection_Changed" FontSize="13" />
                                </StackPanel>
                            </StackPanel>

                            <!-- æ˜¾ç¤ºé€‰é¡¹ -->
                            <StackPanel Grid.Row="4">
                                <TextBlock Text="æ˜¾ç¤ºé€‰é¡¹" Style="{StaticResource LabelStyle}" Margin="0,0,0,8" />
                                <StackPanel>
                                    <CheckBox x:Name="ShowUnitCheckBox" Content="æ˜¾ç¤ºå•ä½" IsChecked="True"
                                              Checked="ShowUnitCheckBox_Changed" Unchecked="ShowUnitCheckBox_Changed"
                                              FontSize="13" />
                                    <CheckBox x:Name="ShowTopListCheckBox" Content="æ˜¾ç¤ºç½‘é€ŸæŽ’è¡Œæ¦œ" Margin="0,8,0,0"
                                              IsChecked="False"
                                              Checked="ShowTopListCheckBox_Changed"
                                              Unchecked="ShowTopListCheckBox_Changed" FontSize="13" />
                                    <StackPanel Orientation="Horizontal" Margin="20,8,0,0">
                                        <TextBlock Text="æŽ’è¡Œæ¦œæ•°é‡:" VerticalAlignment="Center" Margin="0,0,8,0"
                                                   Style="{StaticResource LabelStyle}" />
                                        <ComboBox x:Name="TopListCountComboBox" Width="80"
                                                  SelectionChanged="TopListCountComboBox_SelectionChanged">
                                            <ComboBoxItem Content="1" Tag="1" />
                                            <ComboBoxItem Content="2" Tag="2" />
                                            <ComboBoxItem Content="3" Tag="3" IsSelected="True" />
                                            <ComboBoxItem Content="4" Tag="4" />
                                            <ComboBoxItem Content="5" Tag="5" />
                                        </ComboBox>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- äº¤äº’è®¾ç½® -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸ–±ï¸ äº¤äº’è®¾ç½®" Style="{StaticResource GroupTitleStyle}" />

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="åŒå‡»åŠ¨ä½œ" Style="{StaticResource LabelStyle}" Width="80" />
                            <ComboBox x:Name="DoubleClickActionComboBox" Width="150"
                                      SelectionChanged="DoubleClickActionComboBox_SelectionChanged">
                                <ComboBoxItem Content="æ— åŠ¨ä½œ" Tag="None" IsSelected="True" />
                                <ComboBoxItem Content="æµé‡åˆ†æž" Tag="TrafficAnalysis" />
                                <ComboBoxItem Content="æ‰“å¼€è®¾ç½®" Tag="Settings" />
                            </ComboBox>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- çª—å£è¡Œä¸º -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸªŸ çª—å£è¡Œä¸º" Style="{StaticResource GroupTitleStyle}" />

                        <StackPanel>
                            <CheckBox x:Name="TopmostCheckBox" Content="å§‹ç»ˆç½®é¡¶" IsChecked="True"
                                      Checked="TopmostCheckBox_Changed" Unchecked="TopmostCheckBox_Changed"
                                      FontSize="13" />
                            <CheckBox x:Name="LockPositionCheckBox" Content="é”å®šçª—å£ä½ç½®" IsChecked="False" Margin="0,8,0,0"
                                      Checked="LockPositionCheckBox_Changed" Unchecked="LockPositionCheckBox_Changed"
                                      FontSize="13" />
                            <CheckBox x:Name="ClickThroughCheckBox" Content="å¯ç”¨ç‚¹å‡»ç©¿é€" IsChecked="False" Margin="0,8,0,0"
                                      Checked="ClickThroughCheckBox_Changed" Unchecked="ClickThroughCheckBox_Changed"
                                      FontSize="13" />
                            <CheckBox x:Name="SnapToScreenCheckBox" Content="ä¸èƒ½è¶…å‡ºå±å¹•" IsChecked="False" Margin="0,8,0,0"
                                      Checked="SnapToScreenCheckBox_Changed" Unchecked="SnapToScreenCheckBox_Changed"
                                      FontSize="13" />
                            <CheckBox x:Name="ShowDetailedInfoCheckBox" Content="æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯" IsChecked="False"
                                      Margin="0,8,0,0"
                                      Checked="ShowDetailedInfoCheckBox_Changed"
                                      Unchecked="ShowDetailedInfoCheckBox_Changed" FontSize="13" />
                            <CheckBox x:Name="AutoStartCheckBox" Content="å¼€æœºè‡ªå¯åŠ¨" IsChecked="False"
                                      Margin="0,8,0,0"
                                      Checked="AutoStartCheckBox_Changed"
                                      Unchecked="AutoStartCheckBox_Changed" FontSize="13" />

                            <Button Content="é‡ç½®çª—å£ä½ç½®" Click="ResetWindowPosition_Click" Margin="0,16,0,0"
                                    Style="{StaticResource SecondaryButtonStyle}" HorizontalAlignment="Left" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- åº•éƒ¨æŒ‰é’®æ  -->
        <Border Grid.Row="1" Background="White" BorderBrush="#E5E7EB" BorderThickness="0,1,0,0" Padding="20,16">
            <Grid>
                <Button Content="æ¢å¤é»˜è®¤" Click="RestoreDefaults_Click" HorizontalAlignment="Left"
                        Style="{StaticResource SecondaryButtonStyle}" />
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="åº”ç”¨" Click="Apply_Click" Margin="0,0,12,0"
                            Style="{StaticResource PrimaryButtonStyle}" />
                    <Button Content="å…³é—­" Click="Close_Click" Style="{StaticResource SecondaryButtonStyle}" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>