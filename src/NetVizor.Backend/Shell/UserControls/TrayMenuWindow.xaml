<Window x:Class="Shell.UserControls.TrayMenuWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:Shell.UserControls"
        mc:Ignorable="d"
        Title="TrayMenu"
        Height="200" Width="180"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Deactivated="Window_Deactivated">

    <Window.Resources>
        <!-- 菜单项样式 -->
        <Style x:Key="MenuItemStyle" TargetType="Border">
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Background" Value="Transparent" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E3F2FD" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- 图标样式 -->
        <Style x:Key="IconStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="Foreground" Value="#2196F3" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,0,10,0" />
        </Style>

        <!-- 文本样式 -->
        <Style x:Key="TextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="#333333" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <!-- 分隔线样式 -->
        <Style x:Key="SeparatorStyle" TargetType="Rectangle">
            <Setter Property="Height" Value="1" />
            <Setter Property="Fill" Value="#E0E0E0" />
            <Setter Property="Margin" Value="10,5" />
        </Style>
    </Window.Resources>

    <Border Background="White"
            CornerRadius="8"
            BorderBrush="#E0E0E0"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="3"
                              Direction="315"
                              Color="#40000000"
                              Opacity="0.3"
                              BlurRadius="10" />
        </Border.Effect>

        <StackPanel Margin="5">
            <!-- 打开主窗口 -->
            <Border Style="{StaticResource MenuItemStyle}"
                    MouseLeftButtonDown="ShowMainWindow_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE8A7;" Style="{StaticResource IconStyle}" />
                    <TextBlock Text="打开主窗口" Style="{StaticResource TextStyle}" />
                </StackPanel>
            </Border>

            <!-- 分隔线 -->
            <Rectangle Style="{StaticResource SeparatorStyle}" />

            <!-- 最小化到托盘 -->
            <Border Style="{StaticResource MenuItemStyle}"
                    MouseLeftButtonDown="HideToTray_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE921;" Style="{StaticResource IconStyle}" />
                    <TextBlock Text="最小化到托盘" Style="{StaticResource TextStyle}" />
                </StackPanel>
            </Border>

            <!-- 关于 -->
            <Border Style="{StaticResource MenuItemStyle}"
                    MouseLeftButtonDown="About_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE946;" Style="{StaticResource IconStyle}" />
                    <TextBlock Text="关于" Style="{StaticResource TextStyle}" />
                </StackPanel>
            </Border>

            <!-- 分隔线 -->
            <Rectangle Style="{StaticResource SeparatorStyle}" />

            <!-- 退出程序 -->
            <Border Style="{StaticResource MenuItemStyle}"
                    MouseLeftButtonDown="ExitApplication_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE8BB;"
                               Style="{StaticResource IconStyle}"
                               Foreground="#F44336" />
                    <TextBlock Text="退出程序"
                               Style="{StaticResource TextStyle}"
                               Foreground="#F44336" />
                </StackPanel>
            </Border>
        </StackPanel>
    </Border>

</Window>